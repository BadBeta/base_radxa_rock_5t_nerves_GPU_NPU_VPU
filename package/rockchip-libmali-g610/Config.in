config BR2_PACKAGE_ROCKCHIP_LIBMALI_G610
	bool "rockchip-libmali-g610"
	depends on BR2_aarch64
	depends on BR2_TOOLCHAIN_USES_GLIBC
	select BR2_PACKAGE_LIBDRM
	select BR2_PACKAGE_HAS_LIBEGL
	select BR2_PACKAGE_HAS_LIBGBM
	select BR2_PACKAGE_LIBGBM_HAS_FEATURE_DMA_BUF
	select BR2_PACKAGE_LIBGBM_HAS_FEATURE_FORMAT_MODIFIER_PLANE_COUNT
	select BR2_PACKAGE_HAS_LIBGLES
	help
	  Mali-G610 GPU userspace library for RK3588.

	  Provides OpenGL ES 3.2, OpenCL 2.2, and Vulkan 1.2 support.

	  This is a proprietary binary blob from Rockchip/ARM.

config BR2_PACKAGE_PROVIDES_LIBEGL
	default "rockchip-libmali-g610" if BR2_PACKAGE_ROCKCHIP_LIBMALI_G610

config BR2_PACKAGE_PROVIDES_LIBGBM
	default "rockchip-libmali-g610" if BR2_PACKAGE_ROCKCHIP_LIBMALI_G610

config BR2_PACKAGE_PROVIDES_LIBGLES
	default "rockchip-libmali-g610" if BR2_PACKAGE_ROCKCHIP_LIBMALI_G610

if BR2_PACKAGE_ROCKCHIP_LIBMALI_G610

choice
	prompt "Display backend"
	default BR2_PACKAGE_ROCKCHIP_LIBMALI_G610_GBM

config BR2_PACKAGE_ROCKCHIP_LIBMALI_G610_GBM
	bool "GBM only"
	help
	  Use GBM backend (for framebuffer/DRM applications)

config BR2_PACKAGE_ROCKCHIP_LIBMALI_G610_WAYLAND
	bool "Wayland + GBM"
	select BR2_PACKAGE_WAYLAND
	help
	  Use Wayland + GBM backend

config BR2_PACKAGE_ROCKCHIP_LIBMALI_G610_X11_WAYLAND
	bool "X11 + Wayland + GBM"
	select BR2_PACKAGE_WAYLAND
	select BR2_PACKAGE_XORG7
	help
	  Use X11 + Wayland + GBM backend (largest library)

endchoice

endif

comment "rockchip-libmali-g610 needs a glibc aarch64 toolchain"
	depends on !BR2_aarch64 || !BR2_TOOLCHAIN_USES_GLIBC
