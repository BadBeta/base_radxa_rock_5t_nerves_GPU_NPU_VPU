# erlinit.config - Erlinit configuration for Rock 5T
#
# See https://github.com/nerves-project/erlinit for documentation

# Mount points
# Format: source:target:type:flags:options
# Boot partition (FAT32)
-m /dev/mmcblk0p1:/boot:vfat::
# tmpfs for runtime directories (required since rootfs is read-only SquashFS)
# Format: dev:path:type:flags:options
-m tmpfs:/tmp:tmpfs:nodev,nosuid:size=1000M,mode=1777
-m tmpfs:/run:tmpfs:nodev,nosuid:size=32M,mode=0755
# Shared memory for Chromium multi-process architecture
-m tmpfs:/dev/shm:tmpfs:nodev,nosuid,noexec:size=2000M,mode=1777

# Hostname for this device
-n rock5t

# Console device for output
# Rock 5T uses UART2 at 1.5Mbps
-c ttyS2

# Load kernel modules before starting Erlang VM
# Note: Panthor GPU driver is built-in, WiFi (rtw89) auto-loads via PCI

# Graceful shutdown timeout in milliseconds
--graceful-shutdown-timeout 10000

# Environment variables available in Erlang
-e LANG=en_US.UTF-8
-e ERL_CRASH_DUMP=/tmp/erl_crash.dump
-e RELEASE_NAME=rock5t_app

# Display boot message on HDMI before starting Erlang
--pre-run-exec /usr/bin/boot-message.sh

# Working directory for Erlang
-d /srv/erlang

# Erlang release to run
# Nerves expects releases at /srv/erlang/releases
# The default release is selected automatically

# Additional kernel parameters
# --boot-arg extra_args

# Alternate init (normally not needed)
# --alternate-exec /bin/sh

# Verbose mode disabled for faster boot
# Uncomment for debugging: --verbose

# Verbose mode disabled for faster boot
# Uncomment for debugging: --verbose
